<!DOCTYPE html>
<html>
<head>
    <title>My Secret VM</title>
    <style>
        body { background: #000; color: #0f0; font-family: monospace; text-align: center; margin: 0; }
        #screen_container { margin-top: 50px; display: inline-block; border: 2px solid #333; background: #000; }
        canvas { display: block; }
    </style>
</head>
<body>
    <h2>Browser VM Terminal</h2>
    <p>If the box stays black, the school might be blocking the connection.</p>

    <div id="screen_container">
        <div style="white-space: pre; font-family: Courier, monospace;"></div>
        <canvas></canvas>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/v86@0.10.2/build/libv86.js"></script>

    <script>
    window.onload = function() {
        // This ensures the library is actually loaded before trying to start
        if (typeof V86Starter === 'undefined') {
            alert("The VM engine is blocked by your school internet.");
            return;
        }

        var emulator = new V86Starter({
            wasm_path: "https://cdn.jsdelivr.net/npm/v86@0.10.2/build/v86.wasm",
            memory_size: 32 * 1024 * 1024,
            vga_memory_size: 2 * 1024 * 1024,
            screen_container: document.getElementById("screen_container"),
            bios: { url: "https://cdn.jsdelivr.net/gh/copy/v86@master/bios/seabios.bin" },
            vga_bios: { url: "https://cdn.jsdelivr.net/gh/copy/v86@master/bios/vgabios.bin" },
            cdrom: { url: "https://cdn.jsdelivr.net/gh/copy/v86@master/images/linux.iso" },
            autostart: true,
        });
    };
    </script>
</body>
</html>
